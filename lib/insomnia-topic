#!/bin/sh

if insomnia-ischan; then
	# TODO: Terminate if there is no topic for the channel
	insomnia-rev | awk -vFS=": " \
		'/^[0-9]+ \[\*\] topic for .+ is: .+$/ { print($2); exit }'
else
	name="$(insomnia-name)"
	echo "[(insomnia)]${name:+ $name}"
fi
